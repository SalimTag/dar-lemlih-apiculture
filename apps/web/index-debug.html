<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Debug - Dar Lemlih</title>
    <style>
      body {
        font-family: system-ui, -apple-system, sans-serif;
        padding: 20px;
        background: #f5f5f5;
      }
      .status {
        padding: 10px;
        background: white;
        border-radius: 8px;
        margin: 10px 0;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      .error {
        background: #fee;
        color: #c00;
      }
      .success {
        background: #efe;
        color: #060;
      }
      pre {
        background: #333;
        color: #fff;
        padding: 10px;
        border-radius: 4px;
        overflow-x: auto;
      }
    </style>
  </head>
  <body>
    <h1>Dar Lemlih - Debug Page</h1>
    <div id="status"></div>
    <div id="errors"></div>
    <div id="root">
      <div class="status">Testing basic HTML rendering... ✅</div>
    </div>
    
    <script>
      const statusEl = document.getElementById('status');
      const errorsEl = document.getElementById('errors');
      
      // Test 1: Check if page loads
      statusEl.innerHTML += '<div class="status success">Page loaded successfully ✅</div>';
      
      // Test 2: Try to load React
      const script = document.createElement('script');
      script.type = 'module';
      script.innerHTML = `
        import React from '/node_modules/.vite/deps/react.js?v=b9a01217';
        import ReactDOM from '/node_modules/.vite/deps/react-dom_client.js?v=8526d974';
        
        window.React = React;
        window.ReactDOM = ReactDOM;
        
        const TestComponent = React.createElement('div', 
          { className: 'status success' }, 
          'React loaded successfully ✅'
        );
        
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(TestComponent);
        
        statusEl.innerHTML += '<div class="status success">React initialized ✅</div>';
      `;
      
      script.onerror = (e) => {
        errorsEl.innerHTML += '<div class="status error">Failed to load React: ' + e + '</div>';
      };
      
      document.head.appendChild(script);
      
      // Catch any console errors
      window.addEventListener('error', (e) => {
        errorsEl.innerHTML += '<div class="status error">Error: ' + e.message + '<pre>' + e.stack + '</pre></div>';
        return false;
      });
      
      // Test API connection
      fetch('http://localhost:8080/api/products')
        .then(r => r.json())
        .then(data => {
          statusEl.innerHTML += '<div class="status success">API connection successful ✅ Found ' + data.content.length + ' products</div>';
        })
        .catch(err => {
          errorsEl.innerHTML += '<div class="status error">API connection failed: ' + err.message + '</div>';
        });
    </script>
  </body>
</html>
